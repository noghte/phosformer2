import{S as Se,i as Ve,s as xe,k as i,q as A,a as H,l as c,m as d,r as L,h as a,c as N,n as o,b as B,F as t,H as re,O as Pe,o as Fe,p as Re,P as oe,G as X,Q as Ie,R as Ae,u as W,T as He,U as be,V as Le,W as ke,X as J,Y as Ne,Z as Ge,_ as Me}from"../chunks/index.9e5a3c56.js";import{k as ne}from"../chunks/kinase_data.eaf3427d.js";const{Map:Ce}=Ge;function _e(p,e,l){const s=p.slice();return s[27]=e[l],s}function ve(p,e,l){const s=p.slice();return s[30]=e[l],s}function me(p,e,l){const s=p.slice();return s[33]=e[l],s[35]=l,s}function Ke(p){let e,l,s,n,b,m,r,_,T,f,S,P,R,w=p[3].length>0&&ge(p);return{c(){e=i("div"),l=i("div"),s=i("input"),n=H(),b=i("button"),m=i("div"),r=i("div"),_=A("Upload Fasta Sequence"),T=H(),f=i("textarea"),S=H(),w&&w.c(),this.h()},l(E){e=c(E,"DIV",{"x-show":!0,class:!0});var g=d(e);l=c(g,"DIV",{class:!0});var u=d(l);s=c(u,"INPUT",{type:!0,id:!0,accept:!0,style:!0}),n=N(u),b=c(u,"BUTTON",{type:!0,class:!0});var k=d(b);m=c(k,"DIV",{class:!0});var D=d(m);r=c(D,"DIV",{class:!0});var I=d(r);_=L(I,"Upload Fasta Sequence"),I.forEach(a),D.forEach(a),k.forEach(a),T=N(u),f=c(u,"TEXTAREA",{rows:!0,cols:!0,class:!0}),d(f).forEach(a),S=N(u),w&&w.l(u),u.forEach(a),g.forEach(a),this.h()},h(){o(s,"type","file"),o(s,"id","file"),o(s,"accept",".fasta, .fa, .fna, .ffn, .faa, .frn"),Re(s,"display","none"),o(r,"class","ml-2"),o(m,"class","flex items-center justify-center m-[10px]"),o(b,"type","button"),o(b,"class","bg-blue-800 h-max w-max rounded-lg text-white font-bold hover:bg-blue-900 mb-4"),o(f,"rows","10"),o(f,"cols","50"),o(f,"class","bg-gray-100 rounded p-2 border focus:outline-none focus:border-blue-500 w-full"),o(l,"class","flex flex-col items-start"),o(e,"x-show","open"),o(e,"class","p-2 bg-white rounded w-full sm:w-1/2")},m(E,g){B(E,e,g),t(e,l),t(l,s),t(l,n),t(l,b),t(b,m),t(m,r),t(r,_),t(l,T),t(l,f),oe(f,p[1]),t(l,S),w&&w.m(l,null),P||(R=[X(s,"change",p[11]),X(b,"click",p[12]),X(f,"input",p[13]),X(f,"input",p[7])],P=!0)},p(E,g){g[0]&2&&oe(f,E[1]),E[3].length>0?w?w.p(E,g):(w=ge(E),w.c(),w.m(l,null)):w&&(w.d(1),w=null)},d(E){E&&a(e),w&&w.d(),P=!1,Ie(R)}}}function ge(p){let e,l,s,n,b,m,r,_,T,f,S,P,R,w,E,g,u,k,D,I=[],U=new Ce,V=p[3];const h=v=>`${v[33].mer}-${v[35]}`;for(let v=0;v<V.length;v+=1){let y=me(p,V,v),x=h(y);U.set(x,I[v]=Ee(x,y))}return{c(){e=i("div"),l=i("h2"),s=A("Extracted 15-Mers (limit: "),n=A(ie),b=A(")"),m=H(),r=i("table"),_=i("thead"),T=i("tr"),f=i("th"),S=A("Start Position"),P=H(),R=i("th"),w=A("15-Mer Sequence"),E=H(),g=i("th"),u=A("End Position"),k=H(),D=i("tbody");for(let v=0;v<I.length;v+=1)I[v].c();this.h()},l(v){e=c(v,"DIV",{class:!0});var y=d(e);l=c(y,"H2",{class:!0});var x=d(l);s=L(x,"Extracted 15-Mers (limit: "),n=L(x,ie),b=L(x,")"),x.forEach(a),m=N(y),r=c(y,"TABLE",{class:!0});var F=d(r);_=c(F,"THEAD",{});var G=d(_);T=c(G,"TR",{});var M=d(T);f=c(M,"TH",{class:!0});var j=d(f);S=L(j,"Start Position"),j.forEach(a),P=N(M),R=c(M,"TH",{class:!0});var C=d(R);w=L(C,"15-Mer Sequence"),C.forEach(a),E=N(M),g=c(M,"TH",{class:!0});var Y=d(g);u=L(Y,"End Position"),Y.forEach(a),M.forEach(a),G.forEach(a),k=N(F),D=c(F,"TBODY",{});var K=d(D);for(let O=0;O<I.length;O+=1)I[O].l(K);K.forEach(a),F.forEach(a),y.forEach(a),this.h()},h(){o(l,"class","text-lg font-semibold mb-2"),o(f,"class","py-2 px-4 bg-blue-200 border"),o(R,"class","py-2 px-4 bg-blue-200 border"),o(g,"class","py-2 px-4 bg-blue-200 border"),o(r,"class","min-w-full bg-white"),o(e,"class","flex-child p-2 bg-white rounded svelte-1bw6ubl")},m(v,y){B(v,e,y),t(e,l),t(l,s),t(l,n),t(l,b),t(e,m),t(e,r),t(r,_),t(_,T),t(T,f),t(f,S),t(T,P),t(T,R),t(R,w),t(T,E),t(T,g),t(g,u),t(r,k),t(r,D);for(let x=0;x<I.length;x+=1)I[x]&&I[x].m(D,null)},p(v,y){y[0]&8&&(V=v[3],I=Ae(I,y,h,1,v,V,U,D,Me,Ee,null,me))},d(v){v&&a(e);for(let y=0;y<I.length;y+=1)I[y].d()}}}function Ee(p,e){let l,s,n=e[33].startPos+"",b,m,r,_=e[33].mer+"",T,f,S,P=e[33].endPos+"",R,w,E;return{key:p,first:null,c(){l=i("tr"),s=i("td"),b=A(n),m=H(),r=i("td"),T=A(_),f=H(),S=i("td"),R=A(P),w=H(),this.h()},l(g){l=c(g,"TR",{key:!0});var u=d(l);s=c(u,"TD",{class:!0});var k=d(s);b=L(k,n),k.forEach(a),m=N(u),r=c(u,"TD",{class:!0});var D=d(r);T=L(D,_),D.forEach(a),f=N(u),S=c(u,"TD",{class:!0});var I=d(S);R=L(I,P),I.forEach(a),w=N(u),u.forEach(a),this.h()},h(){o(s,"class","py-2 px-4 border"),o(r,"class","py-2 px-4 border"),o(S,"class","py-2 px-4 border"),o(l,"key",E=e[35]),this.first=l},m(g,u){B(g,l,u),t(l,s),t(s,b),t(l,m),t(l,r),t(r,T),t(l,f),t(l,S),t(S,R),t(l,w)},p(g,u){e=g,u[0]&8&&n!==(n=e[33].startPos+"")&&W(b,n),u[0]&8&&_!==(_=e[33].mer+"")&&W(T,_),u[0]&8&&P!==(P=e[33].endPos+"")&&W(R,P),u[0]&8&&E!==(E=e[35])&&o(l,"key",E)},d(g){g&&a(l)}}}function qe(p){let e,l,s,n,b,m,r,_,T,f,S,P,R,w=ne,E=[];for(let u=0;u<w.length;u+=1)E[u]=ye(ve(p,w,u));let g=p[5]!==""&&we(p);return{c(){e=i("div"),l=i("div"),s=i("div"),n=i("div"),b=i("span"),m=A("Select a kinase from the list or paste a sequence."),r=H(),_=i("select");for(let u=0;u<E.length;u+=1)E[u].c();T=H(),f=i("textarea"),S=H(),g&&g.c(),this.h()},l(u){e=c(u,"DIV",{"x-show":!0,class:!0});var k=d(e);l=c(k,"DIV",{class:!0});var D=d(l);s=c(D,"DIV",{class:!0});var I=d(s);n=c(I,"DIV",{class:!0});var U=d(n);b=c(U,"SPAN",{class:!0});var V=d(b);m=L(V,"Select a kinase from the list or paste a sequence."),V.forEach(a),r=N(U),_=c(U,"SELECT",{class:!0});var h=d(_);for(let v=0;v<E.length;v+=1)E[v].l(h);h.forEach(a),T=N(U),f=c(U,"TEXTAREA",{type:!0,rows:!0,cols:!0,class:!0}),d(f).forEach(a),U.forEach(a),I.forEach(a),S=N(D),g&&g.l(D),D.forEach(a),k.forEach(a),this.h()},h(){o(b,"class","text-gray-700"),o(_,"class","w-1/3 mb-2 bg-blue-800 text-white font-bold rounded-lg hover:bg-blue-900 focus:border-blue-900 focus:outline-none p-[10px]"),p[4]===void 0&&He(()=>p[14].call(_)),o(f,"type","text"),o(f,"rows","10"),o(f,"cols","50"),o(f,"class","flex-grow bg-gray-100 rounded p-2 mr-4 border focus:outline-none focus:border-blue-500"),o(n,"class","flex flex-col"),o(s,"class","flex items-center"),o(l,"class","flex items-center"),o(e,"x-show","open"),o(e,"class","flex justify-between items-center")},m(u,k){B(u,e,k),t(e,l),t(l,s),t(s,n),t(n,b),t(b,m),t(n,r),t(n,_);for(let D=0;D<E.length;D+=1)E[D]&&E[D].m(_,null);be(_,p[4],!0),t(n,T),t(n,f),oe(f,p[4]),t(l,S),g&&g.m(l,null),P||(R=[X(_,"change",p[14]),X(f,"input",p[15]),X(f,"input",Le(p[8]))],P=!0)},p(u,k){if(k&0){w=ne;let D;for(D=0;D<w.length;D+=1){const I=ve(u,w,D);E[D]?E[D].p(I,k):(E[D]=ye(I),E[D].c(),E[D].m(_,null))}for(;D<E.length;D+=1)E[D].d(1);E.length=w.length}k[0]&16&&be(_,u[4]),k[0]&16&&oe(f,u[4]),u[5]!==""?g?g.p(u,k):(g=we(u),g.c(),g.m(l,null)):g&&(g.d(1),g=null)},d(u){u&&a(e),ke(E,u),g&&g.d(),P=!1,Ie(R)}}}function ye(p){let e,l=p[30].gene+"",s,n,b=p[30].uniprot+"",m;return{c(){e=i("option"),s=A(l),n=A(" - "),m=A(b),this.h()},l(r){e=c(r,"OPTION",{});var _=d(e);s=L(_,l),n=L(_," - "),m=L(_,b),_.forEach(a),this.h()},h(){e.__value=p[30].kinase_domain,e.value=e.__value},m(r,_){B(r,e,_),t(e,s),t(e,n),t(e,m)},p:re,d(r){r&&a(e)}}}function we(p){let e,l;return{c(){e=i("p"),l=A(p[5]),this.h()},l(s){e=c(s,"P",{class:!0});var n=d(e);l=L(n,p[5]),n.forEach(a),this.h()},h(){o(e,"class","text-sm text-gray-500")},m(s,n){B(s,e,n),t(e,l)},p(s,n){n[0]&32&&W(l,s[5])},d(s){s&&a(e)}}}function Ue(p){let e,l,s,n,b,m;return{c(){e=i("button"),l=i("div"),s=i("div"),n=H(),b=i("div"),m=A("Processing..."),this.h()},l(r){e=c(r,"BUTTON",{type:!0,class:!0});var _=d(e);l=c(_,"DIV",{class:!0});var T=d(l);s=c(T,"DIV",{class:!0}),d(s).forEach(a),n=N(T),b=c(T,"DIV",{class:!0});var f=d(b);m=L(f,"Processing..."),f.forEach(a),T.forEach(a),_.forEach(a),this.h()},h(){o(s,"class","h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-white border-4"),o(b,"class","ml-2"),o(l,"class","flex items-center justify-center m-[10px]"),o(e,"type","button"),o(e,"class","bg-red-800 h-max w-max rounded-lg text-white font-bold hover:bg-red-900 hover:cursor-not-allowed duration-[500ms,800ms]"),e.disabled=!0},m(r,_){B(r,e,_),t(e,l),t(l,s),t(l,n),t(l,b),t(b,m)},p:re,d(r){r&&a(e)}}}function Ye(p){let e,l,s,n,b,m;return{c(){e=i("button"),l=i("div"),s=i("div"),n=A("Prediction"),this.h()},l(r){e=c(r,"BUTTON",{type:!0,class:!0});var _=d(e);l=c(_,"DIV",{class:!0});var T=d(l);s=c(T,"DIV",{class:!0});var f=d(s);n=L(f,"Prediction"),f.forEach(a),T.forEach(a),_.forEach(a),this.h()},h(){o(s,"class","ml-2"),o(l,"class","flex items-center justify-center m-[10px]"),o(e,"type","button"),o(e,"class","bg-red-800 h-max w-max rounded-lg text-white font-bold hover:bg-red-900")},m(r,_){B(r,e,_),t(e,l),t(l,s),t(s,n),b||(m=X(e,"click",p[9]),b=!0)},p:re,d(r){r&&a(e),b=!1,m()}}}function De(p){let e,l,s,n,b,m,r,_,T,f,S,P,R,w,E,g,u,k,D,I,U,V,h,v,y,x,F,G,M,j,C=p[2],Y=[];for(let K=0;K<C.length;K+=1)Y[K]=Te(_e(p,C,K));return{c(){e=i("div"),l=i("div"),s=i("div"),n=i("div"),b=i("table"),m=i("thead"),r=i("tr"),_=i("th"),T=A("Start Position"),f=H(),S=i("th"),P=A("Substrate"),R=H(),w=i("th"),E=A("End Position"),g=H(),u=i("th"),k=A("Prediction Score"),D=H(),I=i("th"),U=A("Result"),V=H(),h=i("tbody");for(let K=0;K<Y.length;K+=1)Y[K].c();v=H(),y=i("button"),x=i("div"),F=i("div"),G=A("Download CSV"),this.h()},l(K){e=c(K,"DIV",{class:!0});var O=d(e);l=c(O,"DIV",{class:!0});var q=d(l);s=c(q,"DIV",{class:!0});var Z=d(s);n=c(Z,"DIV",{class:!0});var z=d(n);b=c(z,"TABLE",{class:!0});var $=d(b);m=c($,"THEAD",{});var te=d(m);r=c(te,"TR",{});var Q=d(r);_=c(Q,"TH",{class:!0});var ee=d(_);T=L(ee,"Start Position"),ee.forEach(a),f=N(Q),S=c(Q,"TH",{class:!0});var le=d(S);P=L(le,"Substrate"),le.forEach(a),R=N(Q),w=c(Q,"TH",{class:!0});var se=d(w);E=L(se,"End Position"),se.forEach(a),g=N(Q),u=c(Q,"TH",{class:!0});var ae=d(u);k=L(ae,"Prediction Score"),ae.forEach(a),D=N(Q),I=c(Q,"TH",{class:!0});var de=d(I);U=L(de,"Result"),de.forEach(a),Q.forEach(a),te.forEach(a),V=N($),h=c($,"TBODY",{});var ue=d(h);for(let ce=0;ce<Y.length;ce+=1)Y[ce].l(ue);ue.forEach(a),$.forEach(a),v=N(z),y=c(z,"BUTTON",{type:!0,class:!0});var fe=d(y);x=c(fe,"DIV",{class:!0});var he=d(x);F=c(he,"DIV",{class:!0});var pe=d(F);G=L(pe,"Download CSV"),pe.forEach(a),he.forEach(a),fe.forEach(a),z.forEach(a),Z.forEach(a),q.forEach(a),O.forEach(a),this.h()},h(){o(_,"class","py-2 px-4 bg-blue-200 border"),o(S,"class","py-2 px-4 bg-blue-200 border"),o(w,"class","py-2 px-4 bg-blue-200 border"),o(u,"class","py-2 px-4 bg-blue-200 border"),o(I,"class","py-2 px-4 bg-blue-200 border"),o(b,"class","min-w-full bg-white"),o(F,"class","ml-2"),o(x,"class","flex items-center justify-center m-[8px]"),o(y,"type","button"),o(y,"class","bg-blue-800 h-max w-max rounded-lg text-white hover:bg-blue-900"),o(n,"class","text-center sm:text-left"),o(s,"class","flex flex-col sm:flex-row justify-start items-center gap-4"),o(l,"class","w-1/2 rounded-lg shadow-sm p-5 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-0"),o(e,"class","w-full flex justify-center items-center")},m(K,O){B(K,e,O),t(e,l),t(l,s),t(s,n),t(n,b),t(b,m),t(m,r),t(r,_),t(_,T),t(r,f),t(r,S),t(S,P),t(r,R),t(r,w),t(w,E),t(r,g),t(r,u),t(u,k),t(r,D),t(r,I),t(I,U),t(b,V),t(b,h);for(let q=0;q<Y.length;q+=1)Y[q]&&Y[q].m(h,null);t(n,v),t(n,y),t(y,x),t(x,F),t(F,G),M||(j=X(y,"click",p[10]),M=!0)},p(K,O){if(O[0]&4){C=K[2];let q;for(q=0;q<C.length;q+=1){const Z=_e(K,C,q);Y[q]?Y[q].p(Z,O):(Y[q]=Te(Z),Y[q].c(),Y[q].m(h,null))}for(;q<Y.length;q+=1)Y[q].d(1);Y.length=C.length}},d(K){K&&a(e),ke(Y,K),M=!1,j()}}}function Te(p){let e,l,s=p[27].startPos+"",n,b,m,r=p[27].substrate+"",_,T,f,S=p[27].endPos+"",P,R,w,E=parseFloat(p[27].probability).toFixed(4)+"",g,u,k,D=p[27].result+"",I,U;return{c(){e=i("tr"),l=i("td"),n=A(s),b=H(),m=i("td"),_=A(r),T=H(),f=i("td"),P=A(S),R=H(),w=i("td"),g=A(E),u=H(),k=i("td"),I=A(D),U=H(),this.h()},l(V){e=c(V,"TR",{});var h=d(e);l=c(h,"TD",{class:!0});var v=d(l);n=L(v,s),v.forEach(a),b=N(h),m=c(h,"TD",{class:!0});var y=d(m);_=L(y,r),y.forEach(a),T=N(h),f=c(h,"TD",{class:!0});var x=d(f);P=L(x,S),x.forEach(a),R=N(h),w=c(h,"TD",{class:!0});var F=d(w);g=L(F,E),F.forEach(a),u=N(h),k=c(h,"TD",{class:!0});var G=d(k);I=L(G,D),G.forEach(a),U=N(h),h.forEach(a),this.h()},h(){o(l,"class","py-2 px-4 border"),o(m,"class","py-2 px-4 border"),o(f,"class","py-2 px-4 border"),o(w,"class","py-2 px-4 border"),o(k,"class","py-2 px-4 border"),J(e,"bg-green-200",parseFloat(p[27].probability)>=.8),J(e,"bg-green-100",parseFloat(p[27].probability)>=.5&&parseFloat(p[27].probability)<.8),J(e,"bg-gray-300",parseFloat(p[27].probability)<.3),J(e,"bg-gray-200",parseFloat(p[27].probability)>=.3&&parseFloat(p[27].probability)<.5)},m(V,h){B(V,e,h),t(e,l),t(l,n),t(e,b),t(e,m),t(m,_),t(e,T),t(e,f),t(f,P),t(e,R),t(e,w),t(w,g),t(e,u),t(e,k),t(k,I),t(e,U)},p(V,h){h[0]&4&&s!==(s=V[27].startPos+"")&&W(n,s),h[0]&4&&r!==(r=V[27].substrate+"")&&W(_,r),h[0]&4&&S!==(S=V[27].endPos+"")&&W(P,S),h[0]&4&&E!==(E=parseFloat(V[27].probability).toFixed(4)+"")&&W(g,E),h[0]&4&&D!==(D=V[27].result+"")&&W(I,D),h[0]&4&&J(e,"bg-green-200",parseFloat(V[27].probability)>=.8),h[0]&4&&J(e,"bg-green-100",parseFloat(V[27].probability)>=.5&&parseFloat(V[27].probability)<.8),h[0]&4&&J(e,"bg-gray-300",parseFloat(V[27].probability)<.3),h[0]&4&&J(e,"bg-gray-200",parseFloat(V[27].probability)>=.3&&parseFloat(V[27].probability)<.5)},d(V){V&&a(e)}}}function je(p){let e,l,s,n,b,m,r,_,T,f,S,P,R,w,E,g,u,k,D,I,U,V,h,v=Ke(p),y=qe(p);function x(j,C){return j[6]?Ue:Ye}let F=x(p),G=F(p),M=p[2]&&De(p);return{c(){e=i("section"),l=i("div"),s=i("div"),n=i("div"),b=i("div"),m=i("h1"),r=A("Substrate Sequence"),_=H(),T=i("div"),f=i("ul"),S=i("li"),P=A("Upload a fasta file or paste a sequence."),R=H(),v&&v.c(),w=H(),E=i("div"),g=i("div"),u=i("div"),k=i("h1"),D=A("Kinase Sequences"),I=H(),y&&y.c(),U=H(),V=i("div"),G.c(),h=H(),M&&M.c(),this.h()},l(j){e=c(j,"SECTION",{class:!0});var C=d(e);l=c(C,"DIV",{class:!0});var Y=d(l);s=c(Y,"DIV",{class:!0});var K=d(s);n=c(K,"DIV",{class:!0});var O=d(n);b=c(O,"DIV",{class:!0});var q=d(b);m=c(q,"H1",{class:!0});var Z=d(m);r=L(Z,"Substrate Sequence"),Z.forEach(a),_=N(q),T=c(q,"DIV",{class:!0});var z=d(T);f=c(z,"UL",{});var $=d(f);S=c($,"LI",{});var te=d(S);P=L(te,"Upload a fasta file or paste a sequence."),te.forEach(a),$.forEach(a),z.forEach(a),q.forEach(a),O.forEach(a),R=N(K),v&&v.l(K),K.forEach(a),Y.forEach(a),w=N(C),E=c(C,"DIV",{class:!0});var Q=d(E);g=c(Q,"DIV",{class:!0});var ee=d(g);u=c(ee,"DIV",{class:!0});var le=d(u);k=c(le,"H1",{class:!0});var se=d(k);D=L(se,"Kinase Sequences"),se.forEach(a),le.forEach(a),I=N(ee),y&&y.l(ee),ee.forEach(a),Q.forEach(a),U=N(C),V=c(C,"DIV",{class:!0});var ae=d(V);G.l(ae),ae.forEach(a),h=N(C),M&&M.l(C),C.forEach(a),this.h()},h(){o(m,"class","text-blue-800 font-bold text-md pt-2"),o(T,"class","text-gray-500 pl-5"),o(b,"class","text-center sm:text-left"),o(n,"class","w-full flex flex-col sm:flex-row justify-between items-center gap-1 sm:gap-0"),o(s,"class","flex-child bg-white rounded svelte-1bw6ubl"),o(l,"class","responsive-flex flex-col svelte-1bw6ubl"),o(k,"class","text-blue-800 font-bold text-md pt-2"),o(u,"class","text-center sm:text-left"),o(g,"class","bg-white rounded w-1/2"),o(E,"class","flex"),o(V,"class","flex items-center justify-left"),o(e,"class","py-8 bg-white flex flex-col px-8 mx-auto space-y-12 max-w-7xl xl:px-12")},m(j,C){B(j,e,C),t(e,l),t(l,s),t(s,n),t(n,b),t(b,m),t(m,r),t(b,_),t(b,T),t(T,f),t(f,S),t(S,P),t(s,R),v&&v.m(s,null),t(e,w),t(e,E),t(E,g),t(g,u),t(u,k),t(k,D),t(g,I),y&&y.m(g,null),t(e,U),t(e,V),G.m(V,null),t(e,h),M&&M.m(e,null)},p(j,C){v.p(j,C),y.p(j,C),F===(F=x(j))&&G?G.p(j,C):(G.d(1),G=F(j),G&&(G.c(),G.m(V,null))),j[2]?M?M.p(j,C):(M=De(j),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},i:re,o:re,d(j){j&&a(e),v&&v.d(),y&&y.d(),G.d(),M&&M.d()}}}const ie=200;function Oe(p,e,l){const s=Pe();let n="",b=null,m=[];new Array(m.length).fill("");let r="HLEDIATERATRHRYNAVTGEWLDDEVLIKMASQPFGRGAMRECFRTKKLSNFLHAQQWKGASNYVAKRYIEPVDRDVYFEDVRLQMEAKLWGEEYNRHKPPKQVDIMQMCIIELKDRPGKPLFHLEHYIEGKYIKYNSNSGFVRDDNIRLTPQAFSHFTFERSGHQLIVVDIQGVGDLYTDPQIHTETGTDFGDGNLGVRGMALFFYSHACNRIC",_,T=!1,f;function S(){if(f&&f[0]){l(3,m=[]);const h=new FileReader;h.onload=v=>{const y=v.target.result.split(/\r?\n/);let x=null,F=!1;y.forEach(G=>{if(!F)if(G.startsWith(">"))if(x===null)x=G.substring(1);else{F=!0;return}else l(1,n+=G)}),n&&P(n)},h.readAsText(f[0])}}function P(h){const v="LAGVSETIDPKQNFRYMHWCXBUZO";let y=[];for(let x=7;x<h.length-7&&y.length<ie;x++){const F=h.substring(x-7,x+8);F.length===15&&(F[7]==="T"||F[7]==="S")&&[...F].every(G=>v.includes(G))&&y.push({mer:F,startPos:x-7,endPos:x+7})}l(3,m=y),new Array(m.length).fill("")}function R(h,v){l(1,n=h.target.value.toUpperCase()),s("input",n),l(3,m=[]),P(n)}function w(h){l(4,r=h.target.value),s("input",r)}async function E(){l(6,T=!0);try{const h="http://172.22.150.196:5200/api/predict",v=m.slice(0,ie).map(F=>F.mer),y=await fetch(h,{method:"POST",mode:"cors",body:JSON.stringify({kinase:r,substrates:v}),headers:{"content-type":"application/json"}});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const x=await y.json();l(2,b=x.map((F,G)=>({...F,startPos:m[G].startPos,endPos:m[G].endPos}))),console.log("predResponse",b)}catch(h){console.error("There was a problem with the fetch operation:",h)}finally{l(6,T=!1)}}function g(){let h="data:text/csv;charset=utf-8,";return h+=`Kinase,Substrate,PredictionScore
`,b.forEach(v=>{let y=`${r},${v.substrate},${parseFloat(v.probability).toFixed(4)}`;h+=y+`
`}),encodeURI(h)}function u(){const h=g(),v=document.createElement("a");v.href=h,v.download="results.csv",document.body.appendChild(v),v.click(),document.body.removeChild(v)}Fe(async()=>{ne.sort((h,v)=>h.gene.localeCompare(v.gene)),ne.reduce((h,v)=>{const y=v.family,x=v["kinase domain"];return h.has(y)||h.set(y,[]),h.get(y).push(x),h},new Map)});function k(){f=this.files,l(0,f)}const D=()=>document.getElementById("file").click();function I(){n=this.value,l(1,n)}function U(){r=Ne(this),l(4,r)}function V(){r=this.value,l(4,r)}return p.$$.update=()=>{p.$$.dirty[0]&1&&(l(2,b=null),l(5,_=""),f&&(S(),l(0,f=null)))},[f,n,b,m,r,_,T,R,w,E,u,k,D,I,U,V]}class We extends Se{constructor(e){super(),Ve(this,e,Oe,je,xe,{},null,[-1,-1])}}export{We as default};
